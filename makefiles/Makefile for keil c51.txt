# This Makefile use nmake of Visual C++
# and Keil uv2 be used


PROJNAME=EX1KC51
BASE	=F:\TaryInstalled\KeilV60CHS\C51\BIN
ASM	=$(BASE)\A51.EXE
CC	=$(BASE)\C51.EXE
LINK	=$(BASE)\BL51.EXE
OBJ2HEX	=$(BASE)\OH51.EXE
OBJS	=OS_CPU_C.OBJ OS_CPU_A.OBJ OS_MEM.OBJ STARTUP.OBJ \
	OS_Q.OBJ OS_SEM.OBJ OS_TASK.OBJ OS_TIME.OBJ \
	OS_MBOX.OBJ PC.OBJ EX1L.OBJ OS_CORE.OBJ


ALL: $(PROJNAME).HEX


.ASM.OBJ:
	$(ASM) $<

.C.OBJ:
	$(CC) $<


$(PROJNAME).HEX: $(OBJS)
	$(LINK) $(OBJS)

STARTUP.OBJ: STARTUP.A51
	$(ASM) STARTUP.A51

CLEAN:
	@ECHO OFF
	DEL	$(PROJNAME).HEX	>NUL
	DEL	$(PROJNAME).PLG >NUL
	DEL	$(PROJNAME) >NUL
	DEL	$(PROJNAME).BIN >NUL
	DEL	$(PROJNAME).LNP >NUL
	DEL	$(PROJNAME).M51 >NUL
	DEL	$(PROJNAME).ORC >NUL
	DEL	*.OBJ >NUL
	DEL	*.LST >NUL



